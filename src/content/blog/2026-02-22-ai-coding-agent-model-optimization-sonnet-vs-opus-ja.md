---
title: "AIコーディングエージェントのコスト削減は「モデル変更」より「ツール構成」が効く——Sonnet vs Opus実験レポート"
description: "あるチームが@qa-testerエージェントでOpus vs Sonnetのコスト・パフォーマンス実験を実施。bashツールの追加でカバレッジが+120%、コストが-32%改善した一方、SonnetからOpusへのアップグレードではカバレッジ変化ゼロ、コスト+65%という結果が出た。"
publishedAt: "2026-02-22T12:00:00+09:00"
author: "Flow"
category: "news"
tags: ["Claude", "Sonnet", "Opus", "AIエージェント", "コスト最適化", "QA自動化"]
lang: "ja"
---

2026年2月22日（22:01 JST）に公開された実験レポートが、AIコーディングエージェントのコスト最適化に関する実践的な知見を提供している。あるチームが自社の`@qa-tester`エージェントを対象に、モデル変更とツール構成変更のどちらがパフォーマンス向上に寄与するかを定量的に検証した。

## 実験設計

対象エージェントは`@qa-tester`——テストカバレッジの自動計測と品質チェックを担うAIエージェントだ。実験は段階的に実施された。

1. ベースライン: Sonnetモデルをbashツールなしで運用
2. ステップ1: Sonnetにbashツールを追加
3. ステップ2: bashツールを維持したままSonnetからOpusにアップグレード

## 実験結果

```
ステップ1（Sonnetにbashツール追加）:
  テストカバレッジ:  +120%
  処理時間:         -45%
  コスト/チェック:  -32%

ステップ2（bash有のままSonnet→Opusにアップグレード）:
  テストカバレッジ:  +0%
  処理時間:         +8%
  コスト/チェック:  +65%
```

bashツールの追加によってカバレッジが倍増し、処理時間と単位コストも大幅に改善した。一方、同じツール構成のままモデルをOpusに変更しても、カバレッジへの寄与はゼロだった。処理時間はむしろ増加し、コストは65%上昇した。

## チームの結論

チームの判断は明確だ。「@qa-testerはOpusからSonnetにダウングレードしたまま維持する。カバレッジは同等でOpusの1.7倍安い。Opusに追加費用を払う根拠がない。」

この結論は、Opusへのアップグレードを「投資対効果なし」として棄却するものだ。

## @qa-testerの設計ポイント

実験が成立した背景には、`@qa-tester`の設計原則がある。

**プラン駆動実行**: エージェントがタスクを実行する前に、実行計画を明示的に生成・確認するステップを設けている。計画なしに実行を進めることで生じる無駄な試行を排除する。

**ARIA基準のターゲティング**: UIテスト対象の特定にARIA属性を使用することで、DOMの変更に対してテストが壊れにくい構造を実現している。

**グレースフルデグラデーション**: エラーが発生した際に全体を停止させず、部分的な結果を返せるよう設計されている。これにより、不安定な環境下でも測定可能な出力が得られる。

**スコープを絞ったツールセット**: エージェントが使用できるツールを必要最小限に絞っている。ツールが少ないほど、モデルは与えられた手段の中でタスクを達成しようとする。ツールが多すぎると、モデルは不要な経路を探索し始める。

## 解釈: なぜOpusはbashを活かせなかったか

一つの仮説として、上位モデルほど「制約下でのタスク継続力」が低い場合があるという指摘がある。

Sonnetはbashツールを渡されると、それを活用してテスト実行を完遂しようとした。一方のOpusは、同じツールセットを与えられても、タスクを諦める判断をより早く下した可能性がある。高度なモデルが「実行不可能」と判断する閾値が、より単純なモデルより低い場合、ツールが豊富な環境でかえって成果が落ちることがある。

これは一般化できる仮説ではなく、タスクの種類や設計によって結果は異なるが、「上位モデル＝常に有利」という前提を見直す根拠になりうる。

## 開発者向けTakeaway

AIコーディングエージェントの運用コストを削減する場合、最初の変数はモデルではなくツール構成だ。今回の実験では、適切なツールの追加が単体でカバレッジを倍増させた。この改善を得た後にモデルをアップグレードしても、追加の改善は得られなかった。

最適化の順序として、まずツール構成を固め、その上でモデルの変更を検討することが経済合理的だ。モデルのアップグレードが有効かどうかは、ツール構成が十分に最適化された後に初めて評価できる。
