---
title: "Claude Code v2.1.47 Released: 40+ Bug Fixes, Windows Overhaul, Memory Improvements, and Faster Startup"
description: "Anthropic ships Claude Code v2.1.47 with over 40 bug fixes targeting Windows rendering bugs, long-session memory leaks, a ~500ms startup improvement, plan mode preservation after compaction, and a revamped background agent kill shortcut."
publishedAt: "2026-02-19T07:30:00+09:00"
author: "AI Tools Hub"
category: "news"
lang: "en"
tags: ["Claude Code", "Anthropic", "release notes", "bug fixes", "Windows"]
featured: false
---

Anthropic published Claude Code v2.1.47 to npm on February 18, 2026 (UTC). The release is a broad maintenance update containing more than 40 bug fixes alongside several performance and usability improvements. No new headline features are introduced; the focus is squarely on reliability.

## Windows Reliability Overhaul

Windows users receive the densest cluster of fixes in this release.

Terminal rendering was broken by `os.EOL` (`\r\n`) line endings leaking into display code, causing line-count displays to show 1 instead of the correct value. Bold and colored Markdown text was also shifting to wrong characters on Windows for the same reason. Both are now fixed.

Bash tool output was being silently discarded for users running MSYS2 or Cygwin shells. A separate fix stops CWD-tracking temp files from accumulating indefinitely (issue #17600). Image pasting now works on WSL2 systems where Windows copies images as BMP format (#25935). Worktree session matching now handles mixed drive-letter casing correctly.

## Memory Improvements for Long Sessions

Three independent memory leaks in long-running agent sessions are addressed:

- API stream buffers, agent context, and skill state are now released after use.
- Agent task message history is trimmed after tasks complete.
- An O(n²) message accumulation in agent progress updates is eliminated.

Together these changes meaningfully reduce the memory footprint of multi-hour coding sessions.

## Startup Performance

SessionStart hook execution is now deferred, reducing time-to-interactive by approximately 500 milliseconds.

## VS Code Plan Preview Improvements

The plan preview panel in the VS Code extension now auto-updates as Claude iterates on a plan. Commenting is enabled only when the plan is ready for review, and rejecting a plan keeps the preview open so Claude can revise rather than closing it.

## Background Agent Control Change

The shortcut to kill all background agents has changed. Previously, double-pressing ESC terminated them. Now, `ctrl+f` kills all background agents while a single ESC cancels only the main thread, leaving background agents running. This gives finer control over agent lifecycle during complex multi-agent sessions.

## Session Management

Several session-resume issues are resolved:

- `/resume` no longer fails to find sessions whose first message exceeds 16KB (#25920, #25721).
- Custom session titles set with `/rename` are no longer lost after resuming a conversation (#23610).
- Session names set via `/rename` now survive context compaction (#26121).
- The session resume picker now shows 50 sessions on first load, up from 10 (#26123).

## Context Compaction Fixes

Compaction was failing when a conversation contained many PDF documents; document blocks are now stripped alongside images before sending to the compaction API (#26188). A separate fix prevents plan mode from being lost after compaction, which was silently causing the model to switch from planning to implementation mode (#26061).

## Agent and Skill Fixes

- User-defined agents now load all files on NFS/FUSE filesystems that report zero inodes, not just the first one (#26044).
- Plugin agent skills referenced by bare name (rather than fully-qualified plugin name) no longer silently fail to load (#25834).
- Project-level `.claude/agents/` and `.claude/skills/` directories are now discovered when running from a git worktree.
- The custom `model` field in `.claude/agents/*.md` is now respected when spawning team teammates (#26064).
- Concurrent agent sessions no longer trigger API 400 errors ("thinking blocks cannot be modified") caused by interleaved streaming content blocks.

## Other Notable Fixes and Additions

**`@` file mentions:** The file suggestion index is pre-warmed on startup and cached per session with background refresh, making file suggestions appear noticeably faster.

**Bash permission classifier:** A fix prevents the classifier from generating hallucinated match descriptions that don't correspond to actual input rules — a subtle but security-relevant correctness bug.

**Hook inputs:** `last_assistant_message` is added to Stop and SubagentStop hook inputs, allowing hooks to access the final assistant response without parsing transcript files.

**New keybinding:** `chat:newline` is added as a configurable action for inserting literal newlines in multi-line input (#26075).

**Statusline JSON:** `added_dirs` is now exposed in the `workspace` section, making directories added via `/add-dir` visible to external scripts (#26096).

**CJK layout:** Wide CJK characters no longer cause misaligned timestamps and layout elements in the TUI (#26084).

**Thinking mode:** `alwaysThinkingEnabled: true` in `settings.json` now correctly activates thinking mode on Bedrock and Vertex providers (#26074).

**MCP:** MCP servers now appear in the MCP Management Dialog after deferred loading.

**macOS FSEvents loop:** Read-only git commands no longer trigger file watcher loops on macOS; `--no-optional-locks` is now passed (#25750).

**Background agent results:** Background agents now return the agent's final answer instead of raw transcript data (#26012).

## Upgrading

```bash
npm install -g @anthropic-ai/claude-code@2.1.47
```

Or from within Claude Code:

```bash
claude update
```

---

*v2.1.47 was published to the npm registry at 20:15 UTC on February 18, 2026. No GitHub release tag has been created as of this writing. Full changelog is available in the [CHANGELOG.md](https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md) file.*
