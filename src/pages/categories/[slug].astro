---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import ToolCard from '../../components/ToolCard.astro';
import { getAllTools, categories } from '../../lib/tools';

export const prerender = false;

export async function getStaticPaths() {
  return categories.map((category) => ({
    params: { slug: category.slug },
    props: { category }
  }));
}

const { slug } = Astro.params;
const { category } = Astro.props;
const tools = getAllTools().filter((tool) => tool.category === category.name);
---

<Layout title={`${category.name} AI Tools | AI Tools Aggregator`}>
  <Header />
  <main class="mx-auto max-w-7xl px-4 py-8">
    <div class="mb-8">
      <h1 class="text-4xl font-bold">{category.name}</h1>
      <p class="mt-2 text-lg text-gray-600">{category.description}</p>
      <p class="mt-1 text-sm text-gray-500">{tools.length} tools available</p>
    </div>

    <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
      {tools.map((tool) => (
        <ToolCard {...tool} />
      ))}
    </div>

    {tools.length === 0 && (
      <div class="rounded-lg border border-gray-200 bg-gray-50 p-8 text-center">
        <p class="text-gray-600">No tools found in this category yet.</p>
      </div>
    )}
  </main>
</Layout>
